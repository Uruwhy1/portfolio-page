---
import Content from "../components/home/Content.astro";
import HomeImage from "../components/home/HomeImage.astro";
import styles from "./Home.module.css";
---

<div class={`${styles.container} zone`} id="home">
  <div class={styles.image}>
    <HomeImage />
  </div>
  <div class={styles.text}>
    <div class={styles.title}>
      <h1>Facundo Tu√±as</h1>
      <div>
        <p class={styles.position}>Web Developer</p>
        <p class={styles.hidden}>Self-Taught</p>
      </div>
    </div>
    <Content />
  </div>
</div>

<script>
  const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

  const titleElement = document.querySelector("h1") as HTMLElement;
  if (titleElement) {
    const originalText = titleElement.textContent || "";

    titleElement.addEventListener("mouseover", () => {
      let iterations = 0;
      const interval = setInterval(() => {
        titleElement.textContent = originalText
          .split("")
          .map((char, index) => {
            if (index < iterations) {
              return originalText[index];
            }
            return letters[Math.floor(Math.random() * letters.length)];
          })
          .join("");

        if (iterations >= originalText.length) {
          clearInterval(interval);
        }

        iterations += 1 / 3;
      }, 50);
    });
  }
</script>
